<!DOCTYPE html>
<html ng-app="esri-map-example">
    <head>
        <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
        <meta charset="utf-8">
        <title>Add places</title>

        <!-- load Bootstrap CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" integrity="sha512-dTfge/zgoMYpP7QbHy4gWMEGsbsdZeCXz7irItjcC3sPUFtf0kuFbDz/ixG7ArTxmDjLXDmezHubeNikyKGVyQ==" crossorigin="anonymous">

        <!-- load Esri CSS -->
        <link rel="stylesheet" href="http://js.arcgis.com/3.14/esri/css/esri.css">
        
        <!-- load Sample CSS -->
        <link rel="stylesheet" href="add-places.css">
    </head>

    <body ng-controller="MapController">
        <div class="container">
          
          <div class="row">  
            <div class="col-md-12">
              
              <h1>Add new places form</h1>
              
              <div class="row">
                <div class="col-md-6">
                  
                  <h2>Details</h2>
                  <div class="form-group">
                    <label for="name">Name:</label>
                    <input type="text" class="form-control" id="name" placeholder="Place name" ng-model="place.name">
                  </div>

                  <div class="form-group">
                    <label for="type">Food type:</label>
                    <select class="form-control" id="type" ng-model="place.type">
                      <option>French</option>
                      <option>Indian</option>
                      <option>Spanish</option>
                      <option>Italian</option>
                      <option>American</option>
                    </select>
                  </div>

                  <div class="form-group">
                    <label for="address">Address:</label> (move the map)
                    <input type="text" class="form-control" id="address" placeholder="Address" ng-model="place.address" readonly>
                  </div>
                  
                  <h2>Preview</h2>
                  <div>
                    <p><strong>Name</strong>: {{place.name || "Not available"}}</p>
                    <p><strong>Food type</strong>: {{place.type}}</p>
                    <p><strong>Address</strong>: {{place.address}}</p>
                    <p><strong>Lat, long</strong>: {{map.center.lat | number:3 }}, {{map.center.lng | number:3 }}</p>
                  </div>

                  <button class="btn btn-primary" ng-click="addPOI()">Send new place</button>

                  <div id="operationSuccess" ng-show="operationSuccess" class="animate-show animate-hide text-center alert alert-success">
                    New place added successfully
                  </div>

                </div>

                <div class="col-md-6">
                  
                  <h2>Location</h2>
                  <!-- add map to page and bind to scope map parameters -->
                  <div style="position:relative">
                    <img src="pin.png" id="pin">
                    <esri-map id="map" map-options="map.options" center="map.center" zoom="map.zoom" >
                      <esri-feature-layer 
        url="http://services.arcgis.com/Q6ZFRRvMTlsTTFuP/arcgis/rest/services/Places/FeatureServer/0"
                    </esri-map>
                  </div>

                </div>
              </div>
          </div>

        </div>
        <div class="row">  
          <div class="col-md-12">
            <h1>Directory</h1>
            <p>Search <input ng-model="name"></p>
            <table class="table table-striped table-bordered">
              <tr>
                <th>#</th>
                <th><label>Name</label></th>
                <th><label>Type</label></th>
                <th><label>Address</label></th>
              </tr>
              <tbody>
              <tr ng-repeat="f in features | filter:name">
                <td>{{f.attributes.OBJECTID}}</td>
                <td>{{f.attributes.name}}</td>
                <td>{{f.attributes.type}}</td>
                <td>{{f.attributes.address}}</td>
              </tr>
            </tbody>
            </table>
          </div>
        </div>    

        <!-- load Esri JavaScript API -->
        <script src="http://js.arcgis.com/3.14/"></script>
        <!-- load Angular -->
        <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.4.7/angular.min.js"></script>
        <!-- load AngularStrap -->
        <script src="//cdnjs.cloudflare.com/ajax/libs/angular-strap/2.3.5/angular-strap.min.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/angular-strap/2.3.5/angular-strap.tpl.min.js"></script>
        <!-- load angular-esri-map directives -->
        <script src="../lib/angular-esri-map.js"></script>
        <!-- load sample code -->
        <script src="add-places.js"></script>
        <!-- run example app controller -->
        
    </body>
</html>
